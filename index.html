
<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8">
  <title>Zmija Igrica</title>
  <style>
    body { background: #000; margin: 0; text-align: center; }
    canvas { background: #111; margin-top: 20px; display: block; margin-left: auto; margin-right: auto; }
    .controls {
      margin-top: 20px;
    }
    button {
      width: 60px;
      height: 60px;
      font-size: 20px;
      margin: 5px;
      background: #444;
      color: white;
      border: none;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <h2 style="color: white;">Zmija Igrica</h2>
  <canvas id="game" width="400" height="400"></canvas>

  <div class="controls">
    <div>
      <button onclick="promeniPravac('gore')">↑</button>
    </div>
    <div>
      <button onclick="promeniPravac('levo')">←</button>
      <button onclick="promeniPravac('dole')">↓</button>
      <button onclick="promeniPravac('desno')">→</button>
    </div>
  </div>

  <script>
    const platno = document.getElementById('game');
    const ctx = platno.getContext('2d');
    const grid = 20;
    let brojac = 0;
    let poeni = 0;
    let brzina = 8;
    let slikaHrane = new Image();
    slikaHrane.src = 'hrana.png';

    const zmija = {
      x: 160,
      y: 160,
      dx: grid,
      dy: 0,
      delovi: [],
      maxDelovi: 4
    };

    const hrana = {
      x: 320,
      y: 320,
      jeSlika: true
    };

    function nasumicniBroj(min, max) {
      return Math.floor(Math.random() * (max - min)) + min;
    }

    function petlja() {
      requestAnimationFrame(petlja);
      if (++brojac < brzina) return;
      brojac = 0;

      ctx.clearRect(0, 0, platno.width, platno.height);
      zmija.x += zmija.dx;
      zmija.y += zmija.dy;

      if (zmija.x < 0) zmija.x = platno.width - grid;
      else if (zmija.x >= platno.width) zmija.x = 0;
      if (zmija.y < 0) zmija.y = platno.height - grid;
      else if (zmija.y >= platno.height) zmija.y = 0;

      zmija.delovi.unshift({ x: zmija.x, y: zmija.y });
      if (zmija.delovi.length > zmija.maxDelovi) zmija.delovi.pop();

      if (hrana.jeSlika) {
        ctx.drawImage(slikaHrane, hrana.x, hrana.y, grid, grid);
      } else {
        ctx.fillStyle = 'red';
        ctx.fillRect(hrana.x, hrana.y, grid - 1, grid - 1);
      }

      ctx.fillStyle = 'lime';
      zmija.delovi.forEach((deo, index) => {
        ctx.fillRect(deo.x, deo.y, grid - 1, grid - 1);
        if (deo.x === hrana.x && deo.y === hrana.y) {
          zmija.maxDelovi++;
          poeni++;
          brzina = Math.max(2, brzina - 0.5);
          hrana.x = nasumicniBroj(0, 20) * grid;
          hrana.y = nasumicniBroj(0, 20) * grid;
          hrana.jeSlika = false;
        }
        for (let i = index + 1; i < zmija.delovi.length; i++) {
          if (deo.x === zmija.delovi[i].x && deo.y === zmija.delovi[i].y) {
            zmija.x = 160;
            zmija.y = 160;
            zmija.delovi = [];
            zmija.maxDelovi = 4;
            zmija.dx = grid;
            zmija.dy = 0;
            hrana.x = nasumicniBroj(0, 20) * grid;
            hrana.y = nasumicniBroj(0, 20) * grid;
            hrana.jeSlika = true;
            poeni = 0;
            brzina = 8;
          }
        }
      });

      ctx.fillStyle = "white";
      
